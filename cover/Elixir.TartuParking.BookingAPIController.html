<!DOCTYPE html>
<html>
  <head>
    <title>Elixir.TartuParking.BookingAPIController</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/source.css" type="text/css" media="screen" charset="utf-8" />
    <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
  </head>

  <body>
    <div id="content">
      <h1>Elixir.TartuParking.BookingAPIController Coverage Source Code</h1>

      <table class="source">
        <thead>
          <tr>
            <th>Line Number</th><th>Covered Lines</th><th>Source Code</th>
          </tr>
        </thead>
        <tbody>
          <tr class="source"><td class="num"> 1</td>
  <td class="num">0</td>
  <td class="elixir">
    
      <a name="#Elixir.TartuParking.BookingAPIController"></a>
    
    <pre class="not_covered">defmodule TartuParking.BookingAPIController do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 2</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">  use TartuParking.Web, :controller
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 3</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  alias TartuParking.{Repo, Booking, Parking, Zone}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 4</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  import Ecto.Query, only: [from: 2]
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 5</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  import Ecto.DateTime
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 6</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 7</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.TartuParking.BookingAPIController.index.2"></a>
    
    <pre class="irrelevant">  def index(conn, _params) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 8</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 9</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    user = conn.assigns.current_user
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 10</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 11</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    bookings =
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 12</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      Repo.all(from t in Booking, where: t.user_id == ^user.id, select: t)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 13</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      |&gt; Enum.map(
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 14</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">           fn (booking) -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 15</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">             parking = Repo.get(Parking, booking.parking_id)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 16</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">             zone = Repo.get(Zone, parking.zone_id)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 17</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 18</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">             %{
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 19</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">               "id": booking.id,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 20</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">               "parking": %{
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 21</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">                 "id": parking.id,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 22</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">                 "address": parking.address,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 23</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">                 "total_slots": parking.total_slots,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 24</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">                 "pin_lng": parking.pin_lng,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 25</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">                 "pin_lat": parking.pin_lat,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 26</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                 "zone": zone
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 27</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">               },
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 28</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">               "status": booking.status,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 29</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">               "start_time": booking.inserted_at,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 30</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">               "payment_method": booking.payment_method
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 31</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">             }
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 32</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">           end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 33</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">         )
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 34</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 35</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    conn
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 36</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    |&gt; put_status(200)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 37</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    |&gt; json(bookings)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 38</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 39</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 40</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  def create(conn, %{"parking_id" =&gt; parking_id, "payment_method" =&gt; payment_method}) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 41</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 42</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    user = conn.assigns.current_user
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 43</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 44</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    changeset =
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 45</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      Booking.changeset(
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 46</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        %Booking{},
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 47</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        %{
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 48</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">          status: "started",
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 49</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">          user_id: user.id,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 50</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">          parking_id: parking_id,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 51</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">          payment_method: payment_method
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 52</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        }
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 53</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      )
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 54</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 55</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    {status, response} =
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 56</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      case Repo.insert(changeset) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 57</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        {:error, _msg} -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 58</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">          {500, %{"message": "Internal error"}}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 59</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 60</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        {:ok, booking} -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 61</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">          {201, %{"message": "Booking created", "booking_id": booking.id}}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 62</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 63</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 64</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    conn
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 65</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    |&gt; put_status(status)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 66</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    |&gt; json(response)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 67</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 68</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 69</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.TartuParking.BookingAPIController.create.2"></a>
    
    <pre class="irrelevant">  def create(conn, _params) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 70</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    conn
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 71</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    |&gt; put_status(200)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 72</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    |&gt; json(%{"message": "Missing Parking ID"})
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 73</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 74</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 75</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 76</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.TartuParking.BookingAPIController.update.2"></a>
    
    <pre class="irrelevant">  def update(conn, %{"id" =&gt; booking_id}) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 77</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 78</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    user = conn.assigns.current_user
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 79</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 80</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    query = from b in Booking, where: b.id == ^booking_id and b.user_id == ^user.id
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 81</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    booking = query
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 82</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">              |&gt; Repo.all()
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 83</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">              |&gt; List.first()
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 84</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 85</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    {status, response} =
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 86</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      case booking do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 87</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        nil -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 88</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">          {404, %{"message": "Booking not found"}}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 89</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 90</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        _ -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 91</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">          booking = Ecto.Changeset.change booking, status: "finished"
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 92</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 93</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">          parking = Repo.get(Parking, booking.data.parking_id)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 94</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 95</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">          case Repo.update booking do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 96</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">            {:ok, struct} -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 97</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">              {price, start_time, end_time} = do_price_for_parking(booking)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 98</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">              {
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 99</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                200,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 100</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                %{
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 101</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                  "message": "Booking finished",
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 102</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                  "price": price,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 103</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                  "start_time": start_time,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 104</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                  "end_time": end_time,
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 105</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">                  "address": parking.address
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 106</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">                }
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 107</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">              }
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 108</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 109</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">            {:error, _changeset} -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 110</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">              {500, %{"message": "Internal error"}}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 111</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">          end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 112</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 113</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 114</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    conn
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 115</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">    |&gt; put_status(status)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 116</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    |&gt; json(response)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 117</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 118</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 119</td>
  <td class="num"></td>
  <td class="elixir">
    
      <a name="#Elixir.TartuParking.BookingAPIController.do_price_for_parking.1"></a>
    
    <pre class="irrelevant">  def do_price_for_parking(booking) do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 120</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 121</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    parking = Repo.get!(Parking, booking.data.parking_id)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 122</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    zone = Repo.get!(Zone, parking.zone_id)
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 123</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 124</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    %{free_time: free_time, price_per_hour: price_per_hour, price_per_min: price_per_min} = zone
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 125</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    %{inserted_at: inserted_at, payment_method: payment_method} = booking.data
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 126</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 127</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    {:ok, inserted_at} = DateTime.from_naive(inserted_at, "Etc/UTC")
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 128</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    now = Timex.now
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 129</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 130</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    diff_in_minutes = Float.ceil DateTime.diff(now, inserted_at) / 60
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 131</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 132</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    minutes_to_pay =
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 133</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      cond do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 134</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        diff_in_minutes &gt; free_time -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 135</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">          diff_in_minutes - free_time
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 136</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 137</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        true -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 138</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">          0
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 139</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 140</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 141</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    price =
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 142</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">      case payment_method
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 143</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        do
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 144</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        "hourly" -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 145</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">          hours_to_pay = minutes_to_pay / 60
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 146</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">          Float.ceil(hours_to_pay, 0) * price_per_hour
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 147</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 148</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">        _ -&gt;
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 149</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">          minutes_to_pay * price_per_min
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 150</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">      end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 151</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 152</td>
  <td class="num">0</td>
  <td class="elixir">
    
    <pre class="not_covered">    {price, inserted_at, now}
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 153</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">  end
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 154</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">
</pre>
  </td>
</tr>
<tr class="source"><td class="num"> 155</td>
  <td class="num"></td>
  <td class="elixir">
    
    <pre class="irrelevant">end</pre>
  </td>
</tr>

        </tbody>
      </table>
    </div>
  </body>
</html>
