alias TartuParking.{Repo,Parking,User, Zone, DataParser}

zone_a_data = Poison.decode! '{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7155421,58.3786729,0],[26.7156547,58.3786659,0],[26.7159605,58.378957,0],[26.7164808,58.3793451,0],[26.7167598,58.3793873,0],[26.7208904,58.3801776,0],[26.7208991,58.3802399,0],[26.7176234,58.3796348,0],[26.7164218,58.3793929,0],[26.7157513,58.3788782,0],[26.7155421,58.3786729,0]]]},"properties":{"name":"Lossi","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7155844,58.378714,0],[26.7150727,58.3787334,0],[26.7134848,58.3788628,0],[26.7126828,58.3789457,0],[26.7125461,58.3789865,0],[26.712487,58.379047,0],[26.7124763,58.3791525,0],[26.712538,58.3792804,0],[26.7126909,58.3796376,0],[26.7128223,58.3797501,0],[26.7129457,58.3799948,0],[26.7129564,58.3801523,0],[26.7129403,58.3803435,0],[26.712817,58.3807148,0],[26.7126292,58.3810973,0],[26.7125756,58.3813701,0],[26.7127311,58.3814994,0],[26.7129296,58.3815923,0],[26.7133802,58.3817694,0],[26.7140561,58.3820057,0],[26.7142439,58.3821153,0],[26.7145228,58.3824163,0],[26.714437,58.3824416,0],[26.714142,58.3821238,0],[26.7137128,58.3819438,0],[26.7130584,58.3817047,0],[26.7128438,58.3816204,0],[26.7126399,58.3815107,0],[26.7125058,58.3813954,0],[26.7125112,58.3812491,0],[26.7125863,58.3809876,0],[26.7127579,58.380622,0],[26.712876,58.3802367,0],[26.7128491,58.3800257,0],[26.7127258,58.3797586,0],[26.7126077,58.3796376,0],[26.7124093,58.379227,0],[26.7123985,58.3790526,0],[26.7125273,58.3789429,0],[26.7128062,58.3788839,0],[26.7135546,58.3788178,0],[26.7150539,58.3786968,0],[26.7155421,58.3786729,0],[26.7155844,58.378714,0]]]},"properties":{"name":"Karl Ernst von Baeri","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7156547,58.3786659,0],[26.7161858,58.3783621,0],[26.7164835,58.3781723,0],[26.7167383,58.377981,0],[26.7170978,58.3777222,0],[26.7172319,58.3776435,0],[26.7173606,58.3776069,0],[26.7175055,58.3776097,0],[26.7176986,58.3776407,0],[26.7182779,58.3777785,0],[26.7189002,58.3779332,0],[26.7191684,58.3779731,0],[26.7192039,58.3778717,0],[26.7192368,58.3777535,0],[26.7193052,58.3777618,0],[26.7192683,58.3778791,0],[26.7192341,58.3779824,0],[26.719721,58.3780429,0],[26.7202896,58.3780738,0],[26.72059,58.3780654,0],[26.7210406,58.378012,0],[26.7220545,58.3778966,0],[26.7222583,58.3778882,0],[26.7224246,58.377891,0],[26.7225051,58.3779191,0],[26.7225909,58.3779613,0],[26.7228162,58.3781441,0],[26.7230033,58.3782844,0],[26.7232065,58.3784191,0],[26.7234703,58.3785293,0],[26.7237127,58.3786269,0],[26.7237702,58.3786504,0],[26.7239565,58.3787427,0],[26.7241842,58.3788769,0],[26.7241278,58.378898,0],[26.7238884,58.3787607,0],[26.7236919,58.3786642,0],[26.7234277,58.3785626,0],[26.7231649,58.3784536,0],[26.7229288,58.3783031,0],[26.7227089,58.378147,0],[26.7225158,58.3779866,0],[26.7224246,58.3779529,0],[26.7222798,58.3779388,0],[26.7220062,58.3779529,0],[26.7209548,58.3780682,0],[26.7205685,58.3781104,0],[26.7202199,58.3781104,0],[26.7197371,58.3780879,0],[26.7188948,58.3779838,0],[26.7176181,58.3776829,0],[26.7175055,58.3776632,0],[26.7174196,58.3776547,0],[26.7172909,58.3776885,0],[26.7165399,58.3782088,0],[26.7156926,58.3787025,0],[26.7156547,58.3786659,0]]]},"properties":{"name":"Vallikraavi","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7145221,58.3824163,0],[26.715418,58.3822588,0],[26.7164533,58.3820957,0],[26.7166196,58.3820422,0],[26.7170595,58.3819044,0],[26.7173438,58.3817947,0],[26.717773,58.381581,0],[26.7181753,58.3813448,0],[26.7185723,58.3810326,0],[26.7187869,58.3808442,0],[26.7190497,58.3806557,0],[26.7191141,58.3806192,0],[26.7191677,58.3806023,0],[26.7193126,58.3806023,0],[26.7197149,58.3806501,0],[26.7202138,58.3807218,0],[26.7205038,58.3807948,0],[26.7204646,58.3808427,0],[26.7201816,58.3807711,0],[26.7198919,58.380726,0],[26.7195969,58.3806867,0],[26.7193662,58.3806501,0],[26.7192375,58.3806417,0],[26.7191516,58.3806585,0],[26.7189907,58.380771,0],[26.718701,58.3810045,0],[26.7184864,58.3811788,0],[26.7182933,58.3813279,0],[26.7181002,58.3814601,0],[26.7178695,58.3816007,0],[26.7176281,58.3817132,0],[26.7174404,58.3818172,0],[26.7169737,58.3819888,0],[26.7165123,58.382135,0],[26.7159598,58.3822306,0],[26.7152517,58.38236,0],[26.7148011,58.3824303,0],[26.7145919,58.3824669,0],[26.7145221,58.3824163,0]]]},"properties":{"name":"Jakobi","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7200536,58.3819269,0],[26.7201823,58.381761,0],[26.720311,58.3816232,0],[26.7203379,58.3814798,0],[26.7203379,58.381342,0],[26.7203808,58.3811338,0],[26.7204022,58.3809454,0],[26.7204646,58.3808427,0],[26.7204988,58.3807992,0],[26.7206544,58.3806353,0],[26.7208166,58.3804687,0],[26.7208649,58.380404,0],[26.7208931,58.3803407,0],[26.7209038,58.3802746,0],[26.7208991,58.3802399,0],[26.7208904,58.3801776,0],[26.7210191,58.3801495,0],[26.7212203,58.3800693,0],[26.7214939,58.3798936,0],[26.7216977,58.379729,0],[26.7218372,58.3796207,0],[26.7220116,58.3794717,0],[26.7222825,58.3792453,0],[26.7224649,58.3790864,0],[26.7225426,58.3790146,0],[26.7226741,58.3788895,0],[26.7228082,58.3787756,0],[26.7229477,58.378649,0],[26.7230952,58.3785253,0],[26.7231649,58.3784592,0],[26.7232132,58.3784142,0],[26.7233956,58.3783087,0],[26.7236879,58.3781188,0],[26.7240259,58.3779051,0],[26.7243692,58.3776941,0],[26.7246133,58.377538,0],[26.7248815,58.3773777,0],[26.7249379,58.3773439,0],[26.725139,58.377216,0],[26.7255816,58.3769361,0],[26.7259383,58.3767195,0],[26.7260912,58.3766239,0],[26.7261502,58.3766605,0],[26.7257667,58.3768925,0],[26.7255655,58.3770191,0],[26.7253804,58.377133,0],[26.7251793,58.3772596,0],[26.7250022,58.3773693,0],[26.7249486,58.377403,0],[26.7247984,58.3774874,0],[26.7245516,58.3776477,0],[26.7242754,58.3778207,0],[26.7239347,58.3780316,0],[26.7236155,58.3782356,0],[26.7233607,58.3783917,0],[26.7232668,58.3784535,0],[26.7231059,58.3785885,0],[26.7229477,58.3787334,0],[26.7228243,58.3788473,0],[26.7226875,58.3789668,0],[26.7225909,58.3790498,0],[26.7227706,58.3791046,0],[26.7230389,58.3791904,0],[26.7231944,58.3792368,0],[26.7231569,58.3792706,0],[26.7230603,58.3792425,0],[26.7228296,58.3791735,0],[26.7226472,58.3791173,0],[26.7225587,58.3790892,0],[26.7224434,58.3791806,0],[26.7222208,58.3793718,0],[26.7220089,58.3795631,0],[26.7218265,58.3797107,0],[26.7216709,58.3798359,0],[26.7214859,58.3799723,0],[26.7213705,58.3800511,0],[26.7212793,58.3800946,0],[26.7214885,58.3801593,0],[26.7214349,58.3801903,0],[26.721215,58.38012,0],[26.7209762,58.3802142,0],[26.7209896,58.3802718,0],[26.7209521,58.3803871,0],[26.7208797,58.3804856,0],[26.7207724,58.3806121,0],[26.7206624,58.3807232,0],[26.7205685,58.3808203,0],[26.7205471,58.380854,0],[26.7205068,58.3809131,0],[26.7204827,58.3810452,0],[26.7204505,58.3812435,0],[26.7204317,58.3814109,0],[26.7204157,58.3815515,0],[26.7204076,58.3815993,0],[26.7203888,58.3816401,0],[26.7203271,58.3817118,0],[26.7202038,58.3818594,0],[26.720126,58.3819494,0],[26.7200536,58.3819269,0]]]},"properties":{"name":"Ãlikooli","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7182028,58.3813887,0],[26.7182524,58.3813539,0],[26.7184281,58.3814123,0],[26.718691,58.3815079,0],[26.7188895,58.3815754,0],[26.7191738,58.3816654,0],[26.7195868,58.3817919,0],[26.7198658,58.3818735,0],[26.7200536,58.3819269,0],[26.720126,58.3819494,0],[26.7204304,58.3820141,0],[26.7206597,58.3820478,0],[26.7210621,58.3821013,0],[26.7214966,58.3821603,0],[26.7219579,58.3822222,0],[26.7224139,58.3822953,0],[26.7227089,58.3823403,0],[26.7228001,58.3823516,0],[26.7228913,58.3823656,0],[26.7233098,58.3824247,0],[26.7237389,58.3824838,0],[26.7239481,58.3825175,0],[26.7239213,58.3825597,0],[26.7235512,58.3825063,0],[26.7230576,58.3824388,0],[26.7226875,58.3823853,0],[26.722151,58.382301,0],[26.7217541,58.3822419,0],[26.7216736,58.3822278,0],[26.7213356,58.3821857,0],[26.721282,58.3821772,0],[26.7208529,58.3821238,0],[26.7204632,58.3820647,0],[26.7201072,58.3819916,0],[26.720016,58.3819719,0],[26.7197049,58.3818819,0],[26.7193937,58.3817947,0],[26.7188707,58.3816239,0],[26.7184335,58.3814657,0],[26.7182028,58.3813887,0]]]},"properties":{"name":"Munga","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7205484,58.3808505,0],[26.7205752,58.3808129,0],[26.7206651,58.3808287,0],[26.721054,58.3808906,0],[26.7215046,58.3809609,0],[26.7217058,58.3809918,0],[26.7219579,58.3810495,0],[26.722202,58.3810832,0],[26.7226017,58.3811409,0],[26.7229021,58.3811845,0],[26.7231917,58.3812266,0],[26.7233339,58.3812466,0],[26.7233132,58.3812811,0],[26.7230362,58.3812407,0],[26.7227545,58.3812013,0],[26.72243,58.3811577,0],[26.7219767,58.3810917,0],[26.7219445,58.381086,0],[26.7217112,58.381034,0],[26.7213035,58.3809707,0],[26.7207831,58.3808878,0],[26.7205484,58.3808505,0]]]},"properties":{"name":"KÃ¼Ã¼tri","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7165613,58.3821182,0],[26.7168081,58.3822925,0],[26.7171729,58.3825288,0],[26.7175376,58.3827875,0],[26.7178112,58.3829478,0],[26.7181867,58.3831474,0],[26.7185086,58.3832374,0],[26.7185837,58.3832571,0],[26.7190826,58.3833612,0],[26.7195654,58.3834624,0],[26.7200696,58.3835496,0],[26.7203701,58.3835918,0],[26.7203164,58.3836565,0],[26.720134,58.3836283,0],[26.7197585,58.3835608,0],[26.7192382,58.3834624,0],[26.7187822,58.3833612,0],[26.7184013,58.3832824,0],[26.7181438,58.3832065,0],[26.7180902,58.3831868,0],[26.7178649,58.3830828,0],[26.7176396,58.3829506,0],[26.7174411,58.3828325,0],[26.7172211,58.3826919,0],[26.7168832,58.3824556,0],[26.7165881,58.3822335,0],[26.7164487,58.3821463,0],[26.7165613,58.3821182,0]]]},"properties":{"name":"Lai","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7174404,58.3818172,0],[26.71772,58.3819325,0],[26.7181009,58.3821069,0],[26.7184925,58.3822813,0],[26.7188412,58.3824331,0],[26.7193401,58.3826328,0],[26.7194313,58.3826581,0],[26.7197907,58.3827228,0],[26.7201447,58.3827875,0],[26.7204988,58.3828522,0],[26.7208099,58.3828887,0],[26.7207764,58.3829344,0],[26.7206061,58.3829168,0],[26.720295,58.3828718,0],[26.7199248,58.3828015,0],[26.7195493,58.3827312,0],[26.7193562,58.3826975,0],[26.7192757,58.3826694,0],[26.7185408,58.3823769,0],[26.7182189,58.3822222,0],[26.7178005,58.3820591,0],[26.7175108,58.3819129,0],[26.7173713,58.381851,0],[26.7174404,58.3818172,0]]]},"properties":{"name":"Lutsu","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7185086,58.3832374,0],[26.7186642,58.3830912,0],[26.7188787,58.382945,0],[26.7191094,58.3827875,0],[26.7192757,58.3826694,0],[26.7193401,58.3826328,0],[26.7195083,58.3825059,0],[26.7195841,58.3824224,0],[26.7196512,58.3823431,0],[26.7198497,58.3821519,0],[26.720016,58.3819719,0],[26.7201072,58.3819916,0],[26.7199945,58.3821097,0],[26.7197424,58.3823797,0],[26.7196344,58.3824982,0],[26.7195667,58.3825555,0],[26.7195051,58.382604,0],[26.7194313,58.3826581,0],[26.7193562,58.3826975,0],[26.719265,58.3827594,0],[26.7190719,58.3828803,0],[26.718868,58.3830378,0],[26.7186856,58.3831924,0],[26.7185837,58.3832571,0],[26.7185086,58.3832374,0]]]},"properties":{"name":"Jaani","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7204076,58.3815888,0],[26.7209011,58.3816176,0],[26.7213464,58.3816429,0],[26.7217755,58.3816794,0],[26.7222261,58.3817216,0],[26.7227679,58.3817638,0],[26.7230362,58.3817891,0],[26.7231301,58.3817976,0],[26.7235833,58.3818397,0],[26.7242646,58.38191,0],[26.7242378,58.381955,0],[26.7238717,58.3819206,0],[26.7233258,58.3818679,0],[26.7230965,58.3818461,0],[26.7229772,58.3818341,0],[26.7228538,58.3818229,0],[26.722489,58.3817919,0],[26.7219633,58.3817469,0],[26.7215234,58.3817132,0],[26.7210782,58.3816822,0],[26.7203888,58.3816401,0],[26.7204076,58.3815888,0]]]},"properties":{"name":"Gildi","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7227089,58.3823403,0],[26.7228591,58.382076,0],[26.7230054,58.3818411,0],[26.7230362,58.3817891,0],[26.7231756,58.3815191,0],[26.7233098,58.3812843,0],[26.7233312,58.3812505,0],[26.7235029,58.3810945,0],[26.7237121,58.380937,0],[26.7239159,58.3807879,0],[26.7240983,58.3806614,0],[26.7242056,58.3805714,0],[26.7242673,58.3806044,0],[26.7242163,58.3806473,0],[26.7240983,58.3807429,0],[26.7238998,58.3808863,0],[26.7236906,58.3810438,0],[26.7234975,58.3811929,0],[26.723401,58.381266,0],[26.7233258,58.3814179,0],[26.7231971,58.3816682,0],[26.7231274,58.3818004,0],[26.7230904,58.3818496,0],[26.7230147,58.3819719,0],[26.7228967,58.3821716,0],[26.7228001,58.3823516,0],[26.7227089,58.3823403,0]]]},"properties":{"name":"Kompanii","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7212659,58.3837718,0],[26.7214832,58.3834793,0],[26.7215154,58.3833837,0],[26.721518,58.3832163,0],[26.7215529,58.3829928,0],[26.721577,58.3828001,0],[26.7215905,58.3826469,0],[26.721628,58.3824374,0],[26.7216736,58.3822278,0],[26.7217541,58.3822419,0],[26.7217353,58.3823431,0],[26.7216897,58.3825484,0],[26.7216656,58.3827284,0],[26.7216441,58.3829028,0],[26.7216146,58.3831067,0],[26.7215905,58.3832979,0],[26.7215663,58.3834694,0],[26.7215422,58.3835116,0],[26.7214563,58.383634,0],[26.7213356,58.3837914,0],[26.7212659,58.3837718,0]]]},"properties":{"name":"Magasini","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7274725,58.3787053,0],[26.7273277,58.3786279,0],[26.7271078,58.3785224,0],[26.7268637,58.3784085,0],[26.7265257,58.3782412,0],[26.7262307,58.3780696,0],[26.7262334,58.3780007,0],[26.7263353,58.3779698,0],[26.7265391,58.378071,0],[26.7268261,58.3782018,0],[26.7273492,58.3784409,0],[26.7276764,58.3785871,0],[26.7274725,58.3787053,0]]]},"properties":{"name":"Uueturu","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7250049,58.3805165,0],[26.7249513,58.3804968,0],[26.7248762,58.3804603,0],[26.7248628,58.3804096,0],[26.7248923,58.3803618,0],[26.7249808,58.380276,0],[26.7250854,58.3801903,0],[26.7252034,58.3800961,0],[26.7253321,58.3799864,0],[26.7251632,58.3799104,0],[26.7249513,58.3798162,0],[26.7247581,58.3797318,0],[26.7245597,58.3796517,0],[26.7243451,58.379594,0],[26.724101,58.3795307,0],[26.7239247,58.3794836,0],[26.7237711,58.3794225,0],[26.7238274,58.3793986,0],[26.7239716,58.3794537,0],[26.7242787,58.3795367,0],[26.7246187,58.3796193,0],[26.7249459,58.37976,0],[26.7251712,58.3798584,0],[26.7253804,58.3799512,0],[26.725485,58.3799864,0],[26.7254502,58.38003,0],[26.7253938,58.3800117,0],[26.7253375,58.3800609,0],[26.725139,58.3802254,0],[26.7249942,58.3803506,0],[26.7249379,58.3804139,0],[26.7249566,58.3804448,0],[26.7250371,58.3804757,0],[26.7250049,58.3805165,0]]]},"properties":{"name":"Poe","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7270219,58.3791145,0],[26.7267805,58.3792776,0],[26.7264158,58.3794773,0],[26.7258525,58.3798204,0],[26.725595,58.3800004,0],[26.7254663,58.3801579,0],[26.7252678,58.3803576,0],[26.7251229,58.3805292,0],[26.7249727,58.3807738,0],[26.7248011,58.3811254,0],[26.7246294,58.3814038,0],[26.7244577,58.3817244,0],[26.72427,58.3821041,0],[26.7241305,58.3823713,0],[26.7239052,58.382824,0],[26.7236745,58.3832937,0],[26.7234868,58.3836368,0],[26.7233419,58.3838983,0],[26.7232722,58.3840361,0],[26.7231488,58.3840136,0],[26.7233044,58.3837718,0],[26.7234278,58.3835158,0],[26.7236638,58.38308,0],[26.7239213,58.3825597,0],[26.7239481,58.3825175,0],[26.7240769,58.382256,0],[26.7242378,58.381955,0],[26.7242646,58.38191,0],[26.724447,58.3815416,0],[26.7246026,58.3812604,0],[26.7247581,58.3809904,0],[26.7250049,58.3805165,0],[26.7250371,58.3804757,0],[26.7252678,58.3802282,0],[26.7254502,58.38003,0],[26.725485,58.3799864,0],[26.7260724,58.3795898,0],[26.7266303,58.3792692,0],[26.7269415,58.3790779,0],[26.7270219,58.3791145,0]]]},"properties":{"name":"Vabaduse puiestee","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.724211,58.3782074,0],[26.7242727,58.3782285,0],[26.7242056,58.378289,0],[26.7240769,58.3783931,0],[26.7239562,58.3785042,0],[26.7238247,58.378604,0],[26.7237702,58.3786504,0],[26.7237127,58.3786269,0],[26.723806,58.3785548,0],[26.7239508,58.3784296,0],[26.7240742,58.3783185,0],[26.724211,58.3782074,0]]]},"properties":{"name":"Promenaadi","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}},{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7249486,58.377403,0],[26.7250022,58.3773693,0],[26.7252302,58.3774775,0],[26.7255065,58.3776083,0],[26.7258015,58.3777518,0],[26.7259008,58.3778052,0],[26.7258444,58.3778305,0],[26.7256191,58.3777251,0],[26.7253026,58.3775661,0],[26.7250478,58.3774466,0],[26.7249486,58.377403,0]]]},"properties":{"name":"Uueturu","styleUrl":"#poly-FF5252-1200-76-nodesc","styleHash":"-5ab401c2","styleMapHash":{"normal":"#poly-FF5252-1200-76-nodesc-normal","highlight":"#poly-FF5252-1200-76-nodesc-highlight"},"stroke":"#ff5252","stroke-opacity":1,"stroke-width":1.2,"fill":"#ff5252","fill-opacity":0.2980392156862745}}]}'
zone_a_parkings = Map.get(zone_a_data, "features")

zone_b_data = Poison.decode! '{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[26.7135546,58.3788178,0],[26.7134178,58.3787685,0],[26.7132407,58.3787095,0],[26.7129135,58.378597,0],[26.712833,58.3785492,0],[26.7127687,58.378507,0],[26.7127579,58.3784732,0],[26.7123234,58.3783832,0],[26.7119265,58.3782988,0],[26.7115617,58.3782088,0],[26.7111245,58.3781139,0],[26.7109394,58.3780682,0],[26.7109662,58.3780401,0],[26.7112975,58.3781104,0],[26.7118299,58.3782285,0],[26.7123663,58.3783438,0],[26.712876,58.3784479,0],[26.71323,58.3785098,0],[26.7135358,58.3785463,0],[26.7138898,58.3785407,0],[26.7141849,58.3785295,0],[26.7145591,58.3785225,0],[26.7149252,58.3785154,0],[26.7152322,58.3785105,0],[26.7153664,58.3785372,0],[26.7154831,58.3785745,0],[26.7156547,58.3786659,0],[26.7155421,58.3786729,0],[26.7154455,58.3786279,0],[26.7154026,58.378604,0],[26.715353,58.3785808,0],[26.7152872,58.3785653,0],[26.7152148,58.3785492,0],[26.7148179,58.3785604,0],[26.7142332,58.3785717,0],[26.713627,58.3785885,0],[26.7135143,58.3785885,0],[26.713407,58.3785829,0],[26.7128599,58.3784957,0],[26.712935,58.3785576,0],[26.7131335,58.3786251,0],[26.7134285,58.3787179,0],[26.7136846,58.3788079,0],[26.7135546,58.3788178,0]]]},"properties":{"name":"Juhan Liivi","styleUrl":"#poly-FFEA00-1200-76-nodesc","styleHash":"6199a798","styleMapHash":{"normal":"#poly-FFEA00-1200-76-nodesc-normal","highlight":"#poly-FFEA00-1200-76-nodesc-highlight"},"stroke":"#ffea00","stroke-opacity":1,"stroke-width":1.2,"fill":"#ffea00","fill-opacity":0.2980392156862745}}]}'
zone_b_parkings = Map.get(zone_b_data, "features")


# Zones
[
  %{name: "Zone A", price_per_hour: 2.0, price_per_min: 0.12, free_time: 15},
  %{name: "Zone B", price_per_hour: 1.0, price_per_min: 0.08, free_time: 90}
]
|> Enum.map(fn zone -> Zone.changeset(%Zone{}, zone) end)
|> Enum.each(fn changeset -> Repo.insert!(changeset) end)


# Zone A Parkings
[
  {"Lossi", 30},
  {"Karl Ernst von Baeri", 40},
  {"Vallikraavi", 25},
  {"Jakobi", 20},
  {"Lai", 30},
  {"Lutsu", 20},
  {"Jaani", 10},
  {"Munga", 10},
  {"Magasini", 15},
  {"Gildi", 15},
  {"Kompanii", 25},
  {"Küütri", 20},
  {"Ülikooli", 70},
  {"Promenaadi", 10},
  {"Uueturu", 30},
  {"Vabaduse puiestee", 30},
  {"Poe", 25},
]
|> Enum.map(
     fn ({address, total_slots}) ->
       %{
         address: address,
         total_slots: total_slots,
         zone_id: 1,
         pin_lng: address
                  |> DataParser.get_coordinates_by_address()
                  |> Map.get("lng"),
         pin_lat: address
                  |> DataParser.get_coordinates_by_address()
                  |> Map.get("lat"),
         coordinates: %Geo.MultiPoint{
           coordinates: DataParser.get_coordinates_by_address(address, zone_a_parkings),
           srid: 4326
         }
       }

     end
   )
|> Enum.map(fn parking -> Parking.changeset(%Parking{}, parking) end)
|> Enum.each(fn changeset -> Repo.insert!(changeset) end)


# Zone B Parkings
[
  {"Juhan Liivi", 25},
]
|> Enum.map(
     fn ({address, total_slots}) ->
       %{
         address: address,
         total_slots: total_slots,
         zone_id: 2,
         pin_lng: address
                  |> DataParser.get_coordinates_by_address()
                  |> Map.get("lng"),
         pin_lat: address
                  |> DataParser.get_coordinates_by_address()
                  |> Map.get("lat"),
         coordinates: %Geo.MultiPoint{
           coordinates: DataParser.get_coordinates_by_address(address, zone_b_parkings),
           srid: 4326
         }
       }

     end
   )
|> Enum.map(fn parking -> Parking.changeset(%Parking{}, parking) end)
|> Enum.each(fn changeset -> Repo.insert!(changeset) end)


# Users
[
  %{name: "User", username: "user", password: "user"},
  %{name: "Admin", username: "admin", password: "admin"}
]
|> Enum.map(fn user -> User.changeset(%User{}, user) end)
|> Enum.each(fn changeset -> Repo.insert!(changeset) end)
